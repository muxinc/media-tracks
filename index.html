<!DOCTYPE html>
<html>
  <head>
    <title>Media Tracks</title>
  </head>
  <body>

    <video
      src="https://stream.mux.com/DS00Spx1CV902MCtPj5WknGlR102V5HFkDe/low.mp4"
      crossorigin
      controls
      muted
      preload="auto"
    ></video>

    <script type="module">
      // Importing this module polyfills the native HTMLMediaElement API.
      import './dist/index.js';

      const myVideo = document.querySelector('video');

      myVideo.addEventListener('emptied', (e) => {
        console.log(e.type, performance.now());
      });

      myVideo.addEventListener('loadstart', (e) => {
        console.log(e.type, performance.now());
      });

      myVideo.addEventListener('loadedmetadata', (e) => {
        console.log(e.type, performance.now());
      });

      myVideo.addEventListener('loadeddata', (e) => {
        console.log(e.type, performance.now());
      });

      myVideo.addEventListener('resize', (e) => {
        console.log(e.type, performance.now());
      });

      myVideo.addEventListener('canplay', (e) => {
        console.log(e.type, performance.now());
      });

      myVideo.videoTracks.addEventListener('change', (e) => {
        console.log(e.type, performance.now());
      })

      myVideo.videoTracks.addEventListener('addtrack', (e) => {
        console.log(e.type, performance.now());
      })

      myVideo.videoTracks.addEventListener('removetrack', (e) => {
        console.log(e.type, performance.now());
      })

      myVideo.addEventListener('play', function(event) {
        console.log(event.type);

        console.log(myVideo.videoTracks)
        console.log(myVideo.audioTracks);

        console.log(myVideo.videoTracks[0]);
        console.log(myVideo.audioTracks[0]);

        console.log(myVideo.videoTracks[0].renditions[0]);
        // console.log(Object.getPrototypeOf(myVideo.videoTracks[0]))
      });

      // setTimeout(() => {
      //   myVideo.removeAttribute('src');
      //   myVideo.load();
      // }, 5000);

    </script>

  </body>
</html>
